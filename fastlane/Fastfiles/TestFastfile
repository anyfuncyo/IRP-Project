# vim: syntax=ruby ts=2 sw=2 sts=2 et

platform :ios do
    desc "Run UI tests"
    before_all do
        ENV["FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT"] = "20"
    end
    lane :build_and_run_ui_test do
        run_tests(
            workspace: "Example/TABTestKit.xcworkspace",
            devices: ["iPhone 14 (16.2)"],
            scheme: "TABTestKit_ExampleUITests",
            testplan: "UITests"
        )
    end
    lane :build_for_testing do
        run_tests(
            workspace: "Example/TABTestKit.xcworkspace",
            devices: ["iPhone 14 (16.2)"],
            scheme: "TABTestKit_ExampleUITests",
            build_for_testing: true,
            derived_data_path: "Example/build"
        )
    end
end